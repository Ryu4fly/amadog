<div class="ml-5 mt-5 mb-5">
  <div class="d-flex">
    <% if resource.avatar.attached? %>
      <%= image_tag resource.avatar.variant(resize: "100x100!"), class: "rounded-circle" %>
    <% else %>
      <%= image_tag gravatar_image_url(current_user.email, size: 100), height: 100, width: 100, class: "rounded-circle" %>
    <% end %>
  </div>
  <h1> <%= @user.username %></h1>
  <h4>and their dog, <%= "#{@user.pet}!" %></h4>
  <% if @user.pet_avatar.attached? %>
    <%= image_tag @user.pet_avatar, style: "width: 200px; display:block;" %>
  <% end %>
</div>

<%= link_to 'Leave a review', new_user_review_path(@user) %>
<ul class="list-group">
  <% @user.reviews.each do |review| %>
    <li class="list-group-item"><%= review.comment %></li>
  <% end %>
</ul>
<p><%= @request %></p>
<% if @user == current_user %>
  <%= link_to 'Your bookings', user_bookings_path(@user) %>
<% end %>
<%= link_to 'Book this walker now', new_user_booking_path(@user) %>
<%= link_to 'Back to walkers search', users_path %>
<%# Map here for debugging purposes currently %>
<div class="mb-3">
  <%= render partial: 'form' %>
</div>
<br />
<div id="map"
     style="width: 100%; height: 600px;"
     data-markers="<%= @markers.to_json %>"
     data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"></div>

<br />

<% unless current_user %>
<div class="ml-3 mt-5">
  <div class="row">
    <div class="col-md-8">
      <h1>Add your dog's photo!</h1>
      <%= form_with(model: @user, local: true, class: "w-25") do |form| %>

      <div class="form-group">
        <%= form.label :pet %>
        <%= form.text_field :name, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= form.label :pet_avatar %>
        <%= form.file_field :pet_avatar, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= form.submit controller.action_name.capitalize + " Pet", class: "btn btn-primary" %>
      </div>

      <% end %>
    </div>
  </div>
</div>
<% end %>

<%# Some old code: %>
<%# <div class="ml-3 mt-5">
  <div class="row">
    <div class="col-md-8">
      <h1>Add Photo</h1>
      <%= simple_form_for @user do |f| %>
        <%# <%= f.input :pet, class: "form-control" %>

          <%# <%= f.input :pet_avatar, as: :file, class: "form-control" %>

        <%# <%= f.button :submit, "Upload", class: 'btn btn-primary' %>
      <%# <% end %>
      <%# <br>
    </div>
  </div>
</div> %>
<%# Display pet picture %>
<%# <%= image_tag @user.pet, height: 300, width: 400, crop: :fill %>
